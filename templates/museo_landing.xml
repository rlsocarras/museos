<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Template para mostrar museo completo -->
        <template id="museo_template" name="Detalle de Museo" active="True">
            <t t-call="website.layout">
                <t t-set="title" t-value="museo.name"/>
                <!-- CSS personalizado -->
                <t t-set="head">
                    <link href="/museos/static/lib/fancybox/cloudflare/all.min.css" rel="stylesheet"/>
                    <!-- <link rel="stylesheet" href="/museos/static/lib/fancybox/cloudflare/googleapis.css"/> -->
                    <link rel="stylesheet" href="/museos/static/css/museo_landing.css"/>
                    <link rel="stylesheet" href="/museos/static/css/museo_carousel.css"/>
                    <link rel="stylesheet" href="/museos/static/css/detalle_museo.css"/>
                    <link rel="stylesheet" href="/museos/static/css/bootstrap-icons.css"/>
                </t>
                <!-- Header -->
                <header>
                    <div class="container">
                        <div class="header-content">
                            <div class="logo">
                                <div class="logo-icon">
                                    <i class="bi bi-building"></i>
                                </div>
                                <div class="logo-text">
                                    <t t-esc="museo.name"/>
                                </div>
                            </div>
                            <nav>
                                <ul>
                                    <li>
                                        <a href="#objetos" >
                                            <i class="bi bi-journal"></i> Objetos
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#actividades" >
                                            <i class="bi bi-calendar-week"></i> Actividades
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#galeria" >
                                            <i class="bi bi-images"></i> Galería
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#historia" >
                                            <i class="bi bi-clock-history"></i> Historias
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#convenios" >
                                            <i class="bi bi-file-earmark-text"></i> Convenios
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#trabajadores" >
                                            <i class="bi bi-people"></i> Equipo
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                            <div class="user-menu">
                                <div class="user-info">
                                    <div class="user-name">Portal de Visitantes</div>
                                    <div class="user-role">Museo
                                        <t t-esc="museo.name"/>
                                    </div>
                                </div>
                                <div class="user-avatar">
                                    <i class="bi bi-person"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </header>
                <!-- Hero Section with Museum Image -->
                <section class="hero" t-att-style="'background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(/web/image/museo.museo/' + str(museo.id) + '/imagen_principal) no-repeat center center; background-size: cover;'">
                    <div class="container">
                        <h1>
                            <t t-esc="museo.name"/>
                        </h1>
                        <p>
                                Explora nuestras colecciones, participa en eventos exclusivos y conoce nuestra historia.
                            
                        </p>
                        <!-- <a href="#estadisticas" class="cta-button" >
                            Ver Estadísticas
                            <i class="bi bi-arrow-right"></i>
                        </a> -->
                    </div>
                </section>
                <!-- Reseña Histórica -->
                <section class="section " id="reseña">
                    <div class="container">
                        <t t-if="museo.resenna_historica">
                            <div class="info-box mt-4">
                                <h3 class="mb-4">
                                    <i class="bi bi-clock-history text-primary mr-2"></i>
                            Reseña Histórica
                                </h3>
                                <div t-raw="museo.resenna_historica"/>
                        </div>
                        </t>
                    </div>
                </section>
                <!-- Activities Timeline Section -->
                <section class="section timeline-section" id="actividades">
                    <div class="mt-3">
                        <h3 class="text-center mb-5">
                            <i class="bi bi-calendar-week text-primary mr-2"></i>
                                    Calendario de Actividades
                        </h3>
                        <t t-if="museo.actividad_ids">
                            <div class="timeline">
                                <t t-foreach="museo.actividad_ids.sorted(key='fecha_inicio', reverse=True)" t-as="actividad">
                                    <div class="timeline-item">
                                        <div class="timeline-content">
                                            <div class="event-date">
                                                <span t-esc="actividad.fecha_inicio.strftime('%d de %B de %Y') if actividad.fecha_inicio else ''"/>,
                                                <span t-esc="actividad.fecha_inicio.strftime('%H:%M') if actividad.fecha_inicio else ''"/>
                                            </div>
                                            <h3 class="event-title">
                                                <t t-esc="actividad.tipo_actividad"/>  :
                                                <t t-esc="actividad.name"/>
                                            </h3>
                                            <t t-if="actividad.sala">
                                                <p class="card-text">
                                                    <i class="bi bi-geo-alt mr-2"></i>
                                                    <t t-esc="actividad.sala"/>
                                                </p>
                                            </t>
                                            <p class="event-description">
                                                <p class="card-text text-truncate">
                                                    <t t-esc="(actividad.descripcion or '').replace('&lt;', '').replace('&gt;', '').replace('&amp;', '')[:150]"/>...
                                                </p>
                                            </p>
                                        </div>
                                    </div>
                                </t>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="text-center py-5">
                                <i class="bi bi-calendar-week fa-4x text-muted mb-3"></i>
                                <h3>No hay actividades programadas</h3>
                                <p class="text-muted">No hay actividades programadas para este museo.</p>
                            </div>
                        </t>
                    </div>
                </section>
                <!-- Objetos -->
                <section class="section" id="objetos">
                    <div class="container">
                        <t t-if="museo.objeto_ids">
                            <section class="objetos-section">
                                <div class="container">
                                    <h3 class="text-center mb-5">
                                        <i class="bi bi-journal text-primary mr-2"></i>
                                        Nuestra Colección
                                    </h3>
                                    <div class="objetos-slider">
                                        <button class="slider-control prev">
                                            <i class="bi bi-chevron-left"></i>
                                        </button>
                                        <div class="objetos-container" id="objetosContainer">
                                            <t t-foreach="museo.objeto_ids" t-as="objeto">
                                                <div class="objeto-card">
                                                    <div class="objeto-img-container">
                                                        <t t-if="objeto.imagen">
                                                            <img t-att-src="'/web/image/museo.objeto/' + str(objeto.id) + '/imagen'"
                                                 class="objeto-img"
                                                 t-att-alt="objeto.name"/>
                                                            <div class="objeto-badge-top">
                                                                <span class="badge categoria-badge">
                                                                    <t t-esc="objeto.categoria"/>
                                                                </span>
                                                            </div>
                                                        </t>
                                                        <t t-else="">
                                                            <div class="objeto-img bg-light d-flex align-items-center justify-content-center">
                                                                <i class="bi bi-box-seam fa-4x text-muted"></i>
                                                                <div class="objeto-badge-top">
                                                                    <span class="badge categoria-badge">
                                                                        <t t-esc="objeto.categoria"/>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </t>
                                                    </div>
                                                    <div class="objeto-info">
                                                        <h5 class="objeto-title">
                                                            <t t-esc="objeto.name"/>
                                                        </h5>
                                                        <div class="objeto-codigo mb-2">
                                                            <i class="bi bi-upc-scan mr-2"></i>
                                                            <small class="text-muted">
                                                                <t t-esc="objeto.codigo_inventario"/>
                                                            </small>
                                                        </div>
                                                        <div class="objeto-estado mb-3">
                                                            <strong>Estado:</strong>
                                                            <span class="badge ml-2" t-att-class="'badge-' + {
                                                'excelente': 'success',
                                                'bueno': 'primary',
                                                'regular': 'warning',
                                                'malo': 'danger',
                                                'restauracion': 'info'
                                            }.get(objeto.estado_conservacion, 'secondary')">
                                                                <t t-esc="objeto.estado_conservacion"/>
                                                            </span>
                                                        </div>
                                                        <p class="objeto-descripcion">
                                                            <t t-esc="(objeto.historia or '').replace('&lt;', '').replace('&gt;', '').replace('&amp;', '')[:120]"/>
                                                            <t t-if="(objeto.historia or '') and len(objeto.historia or '') > 120">...</t>
                                                        </p>
                                                        <t t-if="objeto.valor_estimado and objeto.valor_estimado > 0">
                                                            <div class="objeto-valor mt-3">
                                                                <span class="badge badge-success">
                                                                    <i class="bi bi-currency-dollar mr-1"></i>
                                                    $
                                                                    <t t-esc="'{:,.2f}'.format(objeto.valor_estimado)"/>
                                                                </span>
                                                            </div>
                                                        </t>
                                                        <div class="objeto-ubicacion mt-2">
                                                            <t t-if="objeto.ubicacion_actual">
                                                                <small class="text-muted">
                                                                    <i class="bi bi-geo-alt mr-1"></i>
                                                                    <t t-esc="objeto.ubicacion_actual"/>
                                                                </small>
                                                            </t>
                                                        </div>
                                                    </div>
                                                </div>
                                            </t>
                                        </div>
                                        <button class="slider-control next">
                                            <i class="bi bi-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                            </section>
                        </t>
                        <t t-else="">
                            <div class="text-center py-5">
                                <i class="bi bi-box-seam fa-4x text-muted mb-3"></i>
                                <h4>Colección vacía</h4>
                                <p class="text-muted">No hay objetos registrados en este museo.</p>
                            </div>
                        </t>
                    </div>
                </section>
                <!-- Statistics Section -->
                <section class="stats-section" id="estadisticas">
                    <div class="container">
                        <h2 class="section-title text-center">Estadísticas del Museo</h2>
                        <div class="stats-container">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="bi bi-journal"></i>
                                </div>
                                <div class="stat-number">
                                    <t t-esc="museo.total_objetos or 0"/>
                                </div>
                                <div class="stat-label">Objetos en Colección</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="bi bi-calendar-check"></i>
                                </div>
                                <div class="stat-number">
                                    <t t-esc="museo.total_actividades or 0"/>
                                </div>
                                <div class="stat-label">Actividades Realizadas</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="bi bi-file-earmark-text"></i>
                                </div>
                                <div class="stat-number">
                                    <t t-esc="museo.total_convenios or 0"/>
                                </div>
                                <div class="stat-label">Convenios Activos</div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- Trabajadores Section -->
                <section class="section" id="trabajadores">
                    <div class="container trabajadores-slider">
                        <t t-set="trabajadores" t-value="request.env['res.partner'].sudo().search([
                        ('is_trabajador_museo', '=', True),
                        ('actividad_ids.museo_id', 'in', [museo.id])
                    ], order='name')"/>
                        <t t-if="trabajadores and len(trabajadores) > 0">
                            <section class="trabajadores-section">
                                <div class="container">
                                    <h3 class="text-center mb-5">
                                        <i class="bi bi-people text-primary mr-2"></i>
                                    Nuestro Equipo de Trabajo
                                    </h3>
                                    <div class="trabajadores-slider">
                                        <button class="slider-control prev">
                                            <i class="bi bi-chevron-left"></i>
                                        </button>
                                        <div class="trabajadores-container" id="trabajadoresContainer">
                                            <t t-foreach="trabajadores" t-as="trabajador">
                                                <div class="trabajador-card">
                                                    <div class="trabajador-img-container">
                                                        <t t-if="trabajador.image_1920">
                                                            <img t-att-src="'/web/image/res.partner/' + str(trabajador.id) + '/image_1920'"
                                                             class="trabajador-img"
                                                             t-att-alt="trabajador.name"/>
                                                        </t>
                                                        <t t-else="">
                                                            <div class="trabajador-img bg-light d-flex align-items-center justify-content-center">
                                                                <i class="bi bi-person fa-4x text-muted"></i>
                                                            </div>
                                                        </t>
                                                    </div>
                                                    <div class="trabajador-info">
                                                        <h5>
                                                            <t t-esc="trabajador.name"/>
                                                        </h5>
                                                        <div class="trabajador-cargo">
                                                            <i class="bi bi-briefcase mr-2"></i>
                                                            <t t-esc="trabajador.cargo or 'Trabajador del Museo'"/>
                                                        </div>
                                                        <t t-if="trabajador.especialidad">
                                                            <div class="trabajador-especialidad">
                                                                <i class="bi bi-mortarboard mr-2"></i>
                                                                <t t-esc="trabajador.especialidad"/>
                                                            </div>
                                                        </t>
                                                        <div class="mt-3">
                                                            <span class="badge badge-primary">
                                                                <i class="bi bi-calendar mr-1"></i>
                                                                <t t-if="trabajador.fecha_ingreso">
                                                                Desde
                                                                    <t t-esc="trabajador.fecha_ingreso.strftime('%Y')"/>
                                                            </t>
                                                                <t t-else="">
                                                                Miembro del equipo
                                                            </t>
                                                            </span>
                                                        </div>
                                                        <div class="mt-2">
                                                            <small class="text-muted">
                                                                <i class="bi bi-clock mr-1"></i>
                                                                <t t-if="trabajador.horas_semanales">
                                                                    <t t-esc="trabajador.horas_semanales"/> horas/semana
                                                            </t>
                                                            </small>
                                                        </div>
                                                    </div>
                                                </div>
                                            </t>
                                        </div>
                                        <button class="slider-control next">
                                            <i class="bi bi-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                            </section>
                        </t>
                    </div>
                </section>
                <!-- Historias de barrios -->
                <section class="historias-section" id="historia">
                    <div class="container">
                        <t t-if="museo.historia_barrio_ids">
                            <div class="section-header">
                                <h2 class="section-title">Historias de barrios</h2>
                                <p class="section-subtitle">Descubre las tradiciones y memorias de los barrios relacionados con nuestro museo</p>
                            </div>
                            <div class="row g-4 historias-grid">
                                <t t-foreach="museo.historia_barrio_ids.sorted(key='fecha_registro', reverse=True)" t-as="historia">
                                    <div class="col-lg-4 col-md-6">
                                        <div class="historia-card">
                                            <div class="historia-card-header">
                                                <span class="historia-badge">
                                                    <t t-if="historia.fuente == 'oral'">
                                                        <i class="bi bi-mic"></i> Tradición Oral
                                                    </t>
                                                    <t t-elif="historia.fuente == 'documental'">
                                                        <i class="bi bi-file-text"></i> Documental
                                                    </t>
                                                    <t t-elif="historia.fuente == 'arqueologica'">
                                                        <i class="bi bi-shovel"></i> Arqueológica
                                                    </t>
                                                    <t t-else="">
                                                        <i class="bi bi-collection"></i> Fuente Mixta
                                                    </t>
                                                </span>
                                                <span class="historia-date">
                                                    <i class="bi bi-calendar3"></i>
                                                    <t t-esc="historia.fecha_registro.strftime('%d %b %Y') if historia.fecha_registro else ''"/>
                                                </span>
                                            </div>
                                            <div class="historia-card-body">
                                                <h3 class="historia-title">
                                                    <t t-esc="historia.name"/>
                                                </h3>
                                                <div class="historia-meta">
                                                    <span class="historia-location">
                                                        <i class="bi bi-geo-alt"></i>
                                                        <t t-esc="historia.barrio"/>
                                                        <t t-if="historia.ciudad">,
                                                            <t t-esc="historia.ciudad"/></t>
                                                    </span>
                                                    <span class="historia-status">
                                                        <i class="bi bi-clipboard-check"></i>
                                                        <t t-esc="dict(historia._fields['estado_investigacion'].selection).get(historia.estado_investigacion, '')"/>
                                                    </span>
                                                </div>
                                                <div class="historia-excerpt">
                                                    <t t-set="contenido_limpio" t-value="historia.contenido_historico.replace('&lt;', '').replace('&gt;', '').replace('&amp;', '').strip()"/>
                                                    <t t-esc="contenido_limpio[:180]"/>
                                                    <t t-if="len(contenido_limpio) > 180">...</t>
                                                </div>
                                                <div class="historia-testimonio-preview">
                                                    <t t-if="historia.testimonios and len(historia.testimonios) > 0">
                                                        <i class="bi bi-quote"></i>
                                                        <em>
                                                            <t t-set="testimonio_limpio" t-value="historia.testimonios.replace('\n', ' ').strip()"/>
                                                            <t t-esc="testimonio_limpio[:120]"/>
                                                            <t t-if="len(testimonio_limpio) > 120">...</t>
                                                        </em>
                                                    </t>
                                                </div>
                                            </div>
                                            <div class="historia-card-footer">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="historia-researcher">
                                                        <i class="bi bi-person-circle"></i>
                                                        <small>Investigador:
                                                            <t t-esc="historia.investigador_responsable"/>
                                                        </small>
                                                    </div>
                                                    <a t-attf-href="/historia/barrio/#{historia.id}" class="btn-historia-link">
                                                            Leer historia completa
                                                        <i class="bi bi-arrow-right"></i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                            </div>
                            <div class="text-center mt-5">
                                <a href="#all-historias" class="btn btn-outline-primary btn-lg">
                                    <i class="bi bi-collection-play"></i>
                    Ver todas las historias
                                </a>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="empty-state">
                                <div class="empty-state-icon">
                                    <i class="bi bi-book"></i>
                                </div>
                                <h3 class="empty-state-title">No hay historias registradas</h3>
                                <p class="empty-state-text">Próximamente publicaremos las historias de los barrios relacionados con este museo.</p>
                                <div class="empty-state-action">
                                    <a href="#contacto" class="btn btn-primary">
                                        <i class="bi bi-envelope"></i>
                                         Sugerir una historia
                                    </a>
                                </div>
                            </div>
                        </t>
                    </div>
                </section>
                <!-- Convenios -->
                <section class="section convenios-section" id="convenios">
                    <div class="container">
                        <div class="section-header text-center mb-5">
                            <h2 class="section-title">
                                <i class="bi bi-handshake text-primary mr-2"></i>
                                Convenios y Colaboraciones
                            </h2>
                            <p class="section-subtitle text-muted">
                                Alianzas estratégicas que fortalecen nuestro compromiso cultural
                                </p>
                        </div>
                        <t t-if="museo.convenio_ids">
                            <div class="convenios-grid">
                                <t t-foreach="museo.convenio_ids.filtered(lambda r: r.active).sorted(key='fecha_inicio', reverse=True)" t-as="convenio">
                                    <div class="convenio-card">
                                        <div class="convenio-card-header" t-att-class="'header-' + convenio.estado">
                                            <div class="d-flex justify-content-between align-items-start">
                                                <div>
                                                    <h3 class="convenio-title mb-0">
                                                        <t t-esc="convenio.name"/>
                                                    </h3>
                                                    <div class="convenio-partner mt-1">
                                                        <i class="bi bi-building mr-1"></i>
                                                        <span class="text-light">
                                                            <t t-esc="convenio.partner_id.name"/>
                                                        </span>
                                                    </div>
                                                </div>
                                                <span class="convenio-status">
                                                    <t t-esc="convenio.estado"/>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="convenio-card-body">
                                            <div class="convenio-type mb-3">
                                                <span class="badge tipo-badge">
                                                    <i class="bi bi-tag mr-1"></i>
                                                    <t t-esc="convenio.tipo_convenio"/>
                                                </span>
                                            </div>
                                            <div class="convenio-dates mb-4">
                                                <div class="date-row">
                                                    <div class="date-col">
                                                        <div class="date-icon">
                                                            <i class="bi bi-calendar-check"></i>
                                                        </div>
                                                        <div class="date-content">
                                                            <small class="text-muted d-block">Inicio</small>
                                                            <strong>
                                                                <t t-esc="convenio.fecha_inicio.strftime('%d/%m/%Y') if convenio.fecha_inicio else ''"/>
                                                            </strong>
                                                        </div>
                                                    </div>
                                                    <div class="date-col">
                                                        <div class="date-icon">
                                                            <i class="bi bi-calendar-x"></i>
                                                        </div>
                                                        <div class="date-content">
                                                            <small class="text-muted d-block">Fin</small>
                                                            <strong>
                                                                <t t-if="convenio.fecha_fin" t-esc="convenio.fecha_fin.strftime('%d/%m/%Y')"/>
                                                                <t t-else="">Indefinido</t>
                                                            </strong>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="convenio-info">
                                                <t t-if="convenio.monto and convenio.monto > 0">
                                                    <div class="info-item mb-3">
                                                        <div class="info-label">
                                                            <i class="bi bi-cash-coin mr-2"></i>
                                                            <span>Monto acordado</span>
                                                        </div>
                                                        <div class="info-value text-success font-weight-bold">
                                            $
                                                            <t t-esc="'{:,.2f}'.format(convenio.monto)"/>
                                                        </div>
                                                    </div>
                                                </t>
                                                <div class="convenio-description">
                                                    <p class="mb-0">
                                                        <t t-esc="(convenio.descripcion or '').replace('&lt;', '').replace('&gt;', '').replace('&amp;', '')[:150]"/>
                                                        <t t-if="(convenio.descripcion or '') and len(convenio.descripcion or '') > 150">...</t>
                                                    </p>
                                                </div>
                                            </div>
                                            <t t-if="convenio.responsable_museo">
                                                <div class="convenio-responsable mt-4 pt-3 border-top">
                                                    <div class="d-flex align-items-center">
                                                        <div class="responsable-avatar mr-3">
                                                            <t t-if="convenio.responsable_museo.image_1920">
                                                                <img t-att-src="'/web/image/res.partner/' + str(convenio.responsable_museo.id) + '/image_1920'"
                                                     class="rounded-circle"
                                                     width="40"
                                                     height="40"
                                                     t-att-alt="convenio.responsable_museo.name"/>
                                                            </t>
                                                            <t t-else="">
                                                                <div class="rounded-circle bg-light d-flex align-items-center justify-content-center"
                                                     style="width: 40px; height: 40px;">
                                                                    <i class="bi bi-person text-muted"></i>
                                                                </div>
                                                            </t>
                                                        </div>
                                                        <div>
                                                            <small class="text-muted d-block">Responsable</small>
                                                            <strong>
                                                                <t t-esc="convenio.responsable_museo.name"/>
                                                            </strong>
                                                        </div>
                                                    </div>
                                                </div>
                                            </t>
                                        </div>
                                    </div>
                                </t>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="empty-convenios text-center py-5">
                                <div class="empty-icon mb-4">
                                    <i class="bi bi-handshake display-4 text-muted"></i>
                                </div>
                                <h4 class="mb-3">Sin convenios activos</h4>
                                <p class="text-muted mb-0">
                    Actualmente no hay convenios registrados para este museo.
                                </p>
                            </div>
                        </t>
                    </div>
                </section>
                <!-- Galeria -->
                <section class="section " id="galeria">
                    <div class="container">
                        <t t-if="museo.galeria_ids and len(museo.galeria_ids) > 0">
                            <div class="mt-5">
                                <h3 class="mb-4 text-center">
                                    <i class="bi bi-images text-primary mr-2"></i>
                                Galería del Museo
                                </h3>
                                <div class="museo-carousel" id="galeriaCarousel">
                                    <div class="carousel-container" id="carouselContainer">
                                        <t t-foreach="museo.galeria_ids.sorted(key='sequence')" t-as="foto">
                                            <div class="carousel-slide" t-att-data-index="loop_index">
                                                <img t-att-src="'/web/image/museo.museo.galeria/' + str(foto.id) + '/imagen'"
                                                 t-att-alt="foto.name"/>
                                                <div class="carousel-caption">
                                                    <h5>
                                                        <t t-esc="foto.name"/>
                                                        <t t-if="foto.es_imagen_principal">
                                                            <span class="badge badge-warning ml-2">
                                                                <i class="bi bi-star"></i> Principal
                                                            </span>
                                                        </t>
                                                    </h5>
                                                    <p class="mb-0">
                                                        <t t-esc="foto.categoria"/>
                                                        <t t-if="foto.descripcion"> -
                                                            <t t-esc="foto.descripcion[:100]"/>
                                                            <t t-if="len(foto.descripcion) > 100">...</t>
                                                        </t>
                                                    </p>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                    <button class="carousel-control prev">
                                        <i class="bi bi-chevron-left"></i>
                                    </button>
                                    <button class="carousel-control next">
                                        <i class="bi bi-chevron-right"></i>
                                    </button>
                                    <div class="carousel-indicators" id="carouselIndicators">
                                        <t t-foreach="museo.galeria_ids" t-as="foto">
                                            <button class="carousel-indicator" 
                                                t-att-data-index="loop_index"></button>
                                        </t>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </div>
                </section>
                <footer>
                    <div class="container">
                        <div class="footer-content">
                            <div class="footer-column">
                                <div class="footer-logo">
                                    <t t-esc="museo.name"/>
                                </div>
                                <p class="footer-description">
                                        Museo cultural dedicado a preservar y compartir nuestro patrimonio.
                                </p>
                                <t t-if="museo.email">
                                    <p>
                                        <i class="bi bi-envelope"></i>
                                        <t t-esc="museo.email"/>
                                    </p>
                                </t>
                                <t t-if="museo.telefono">
                                    <p>
                                        <i class="bi bi-telephone"></i>
                                        <t t-esc="museo.telefono"/>
                                    </p>
                                </t>
                            </div>
                            <div class="footer-column">
                                <h3 class="footer-heading">Explorar</h3>
                                <ul class="footer-links">
                                    <li>
                                        <a href="#objetos">
                                            <i class="bi bi-palette"></i> Colecciones
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#actividades">
                                            <i class="bi bi-calendar-week"></i> Eventos
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#galeria" >
                                            <i class="bi bi-images"></i> Galería
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#historia" >
                                            <i class="bi bi-clock-history"></i> Historia
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div class="footer-column">
                                <h3 class="footer-heading">Enlaces Rápidos</h3>
                                <ul class="footer-links">
                                    <t t-if="museo.direccion">
                                        <li>
                                            <a href="#" onclick="showMap()">
                                                <i class="bi bi-geo-alt"></i> Cómo llegar
                                            </a>
                                        </li>
                                    </t>
                                    <li>
                                        <a href="#" onclick="showContactInfo()">
                                            <i class="bi bi-envelope"></i> Contacto
                                        </a>
                                    </li>
                                    <li>
                                        <a href="/" target="_blank">
                                            <i class="bi bi-box-arrow-up-right"></i> Sitio Principal
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="copyright">
                            <t t-esc="datetime.datetime.now().year"/>
                            <t t-esc="museo.name"/>. Todos los derechos reservados.
                        </div>
                    </div>
                </footer>
                <!-- JavaScript para las pestañas y galería -->
                <script src="/museos/static/lib/fancybox/fancybox.umd.js"></script>
                <link rel="stylesheet" href="/museos/static/lib/fancybox/fancybox.css"/>
                <script src="/museos/static/js/museo_effects.js"></script>
                <script>
                
// Inicializar cuando el DOM esté listo
document.addEventListener('DOMContentLoaded', function() {
    // Inicializar fancybox para la galería
    if (typeof Fancybox !== 'undefined') {
        Fancybox.bind("[data-fancybox]", {});
    }
    
    // Inicializar efectos (carrusel y slider)
    if (typeof initMuseoEffects === 'function') {
        initMuseoEffects();
    }
    
    // Inicializar pestañas con JavaScript puro (sin jQuery)
    const tabLinks = document.querySelectorAll('#museoTabs a');
    
    tabLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Remover clase active de todas las pestañas
            tabLinks.forEach(function(tab) {
                tab.classList.remove('active');
            });
            
            // Ocultar todos los paneles
            const tabPanes = document.querySelectorAll('.tab-pane');
            tabPanes.forEach(function(pane) {
                pane.classList.remove('active', 'show');
            });
            
            // Activar la pestaña clickeada
            this.classList.add('active');
            
            // Mostrar el panel correspondiente
            const targetId = this.getAttribute('href');
            const targetPane = document.querySelector(targetId);
            if (targetPane) {
                targetPane.classList.add('active', 'show');
            }
        });
    });
    
    // Fecha actual
    var currentDate = new Date();
    var options = { year: 'numeric', month: 'long', day: 'numeric' };
    var dateElement = document.getElementById('currentDate');
    if (dateElement) {
        dateElement.textContent = currentDate.toLocaleDateString('es-ES', options);
    }
});

            </script>
            </t>
        </template>
    </data>
</odoo>